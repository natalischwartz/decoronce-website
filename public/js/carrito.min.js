const addToCartButtons=document.querySelectorAll(".add-to-cart"),asideMenu=document.querySelector(".aside-menu"),verCarrito=document.querySelector("#verCarrito"),modalContainer=document.getElementById("modal-container"),addButtons=document.querySelectorAll("#add"),substractButtons=document.querySelectorAll("#substract"),quantities=document.querySelectorAll("#quantity"),cantidadCarrito=document.getElementById("cantidadCarrito");addButtons.forEach((e,t)=>{let a=quantities[t];e.addEventListener("click",()=>{a.value=Number(a.value)+1})}),substractButtons.forEach((e,t)=>{let a=quantities[t];e.addEventListener("click",()=>{Number(a.value)>0&&(a.value=Number(a.value)-1)})});let carrito=JSON.parse(localStorage.getItem("carrito"))||[];addToCartButtons.forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-id"),a=e.getAttribute("data-name"),r=e.getAttribute("data-img"),i=e.getAttribute("data-price"),o=e.getAttribute("data-color"),n=e.parentElement.querySelector(".item__input"),l=!!n,c=1;if(l&&(!(c=Number(n.value))||c<1)){Toastify({text:"Debes ingresar una cantidad",duration:3e3,className:"info",style:{background:"linear-gradient(to right, #00b09b, #96c93d)",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.2)",fontSize:"12px",padding:"10px 20px",position:"fixed",top:"10px",right:"10px",zIndex:800,color:"white"}}).showToast();return}let d=carrito.some(e=>e.id===t&&e.color===o);d?carrito.map(e=>{e.id===t&&e.color===o&&e.quantity++}):carrito.push({id:t,name:a,image:r,price:i,quantity:c,color:o}),console.log(carrito),carritoCounter(),saveLocal(),pintarCarrito()})});const mostrarCarrito=()=>{modalContainer.classList.add("modal-visible"),pintarCarrito()},ocultarCarrito=()=>{modalContainer.classList.remove("modal-visible")},pintarCarrito=()=>{modalContainer.innerHTML="",modalContainer.style.display="flex";let e=document.createElement("div");e.className="modal-header",e.innerHTML=`
    <h1 class="modal-header-title">Carrito de compras </h1>
`,modalContainer.append(e);let t=document.createElement("img");t.src="/Imagenes/iconos/MaterialSymbolsArrowLeftAlt.png",t.className="modal-header-icon",t.addEventListener("click",ocultarCarrito),e.append(t),carrito.forEach(e=>{let t=document.createElement("div");t.className="modal-content";let a=document.createElement("div");a.className="carrito-img",a.innerHTML=`<img src="${e.image}" alt="${e.name}">`;let r=document.createElement("div");r.className="cart-item-text",r.innerHTML=`
    <h3 style="padding:0 15px"> ${e.name}  </h3>
    <p style="padding:0 15px"> Color: ${e.color}</p> <!-- Mostrar el color -->
    <p style="padding:0 15px"> Cant: ${e.quantity} x $ ${Number(e.price.replace(/[^0-9.-]+/g,""))} </p>
    <p style="padding:0 15px">Subtotal: $ ${e.quantity*Number(e.price.replace(/[^0-9.-]+/g,""))} </p>
    <img src="/Imagenes/iconos/OouiTrash.png" class="delete-product">
    `,t.append(a,r),modalContainer.append(t),console.log(carrito.length);t.querySelector(".delete-product").addEventListener("click",()=>{eliminarProducto(e.id)})});let a=carrito.reduce((e,t)=>e+t.quantity*Number(t.price.replace(/[^0-9.-]+/g,"")),0),r=document.createElement("div");r.className="total-content",r.innerHTML=` <h1> Total a pagar:$ ${a} </h1> `,modalContainer.append(r);let i=document.createElement("input");i.type="submit",i.value="Enviar pedido",i.className="btnEnviarPedido";let o=document.createElement("p");o.className="texto-obs-carrito",o.innerText="Aclaraci\xf3n: Se confirmar\xe1 stock y colores del g\xe9nero a trav\xe9s de Whatsapp",modalContainer.append(i,o);let n=document.querySelector(".btnEnviarPedido");console.log(n),n.addEventListener("click",enviarMensajeWhatsApp)};verCarrito.addEventListener("click",mostrarCarrito);const eliminarProducto=e=>{let t=carrito.find(t=>t.id===e);console.log(t),carrito=carrito.filter(e=>e!==t),carritoCounter(),saveLocal(),pintarCarrito()},carritoCounter=()=>{cantidadCarrito.style.display="flex";let e=carrito.length;localStorage.setItem("carritoLength",JSON.stringify(e)),cantidadCarrito.innerText=JSON.parse(localStorage.getItem("carritoLength"))};carritoCounter();const generarMensajeWhatsApp=()=>{let e="\xa1Hola! Me gustar\xeda hacer un pedido de los siguientes productos:\n\n";carrito.forEach(t=>{e+=`Producto: ${t.name}
`,e+=`Color: ${t.color}
`,e+=`Cantidad: ${t.quantity}
`,e+=`Precio: ${t.price}

`});let t=carrito.reduce((e,t)=>e+t.quantity*Number(t.price.replace(/[^0-9.-]+/g,"")),0);return e+=`Total a pagar: $${t}`},enviarMensajeWhatsApp=()=>{let e=encodeURIComponent(generarMensajeWhatsApp()),t=`https://api.whatsapp.com/send?phone=5491161622602&text=${e}`;window.open(t,"_blank")},saveLocal=()=>{localStorage.setItem("carrito",JSON.stringify(carrito))};